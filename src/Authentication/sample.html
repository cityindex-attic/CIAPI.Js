<!doctype html> 
<head>
    <title>Authentication demo</title>

    <!--We expect these to already be loaded in the "deployment" page -->
    <script type="text/javascript" src="../../libs/jquery/1.5.1/jQuery.debug.js"></script>
    <script type="text/javascript" src="../../libs/jquery.tmpl.min.js"></script>
    <script type="text/javascript" src="../../libs/json2.js"></script>
    <script type="text/javascript" src="../../libs/jquery-ui/1.8.11/js/jquery-ui.min.js"></script>
    <link type="text/css" href="../../libs/jquery-ui/1.8.11/css/dark-hive/jquery-ui-1.8.11.custom.css" rel="Stylesheet"/>

    <!--These are shared by all CIAPI widgets -->
    <script src="../CIAPI/target/js/CIAPI-0001.debug.js"></script>
	<script src="../CIAPI.widget/target/js/CIAPI.widget-0001.debug.js"></script>
	
    <!--Enable mock data -->
    <script src="../CIAPI/test/CIAPI.amplify.requests.mock.js"></script>
    <!-- CC735158 / password are valid mock credentials -->

    <!--This is for CIAPI.authentication widget -->
    <script src="js/authentication.js"></script>
    <link type="text/css" href="themes/ci-default/ci-default.css" rel="Stylesheet"/>

</head>
<body>

    <script>
        //These default connection options must be set before interacting with CIAPI,
        //unless mock requests are being included above
        CIAPI.connection.ServiceUri = "http://174.129.8.69/TradingApi";
        CIAPI.connection.StreamUri = "http://pushpreprod.cityindextest9.co.uk";
    </script>

    <p>A default authentication widget</p>
    <div id="DefaultAuthenticationWidget" style="width: 250px"></div>
    <script>
        $(document).ready(function() {
          $('#DefaultAuthenticationWidget').CIAPI_widget_AuthenticationWidget(); //inject the widget into the div
        });
    </script>

    <hr>

    <p>A authentication widget with a custom template</p>

	<div id="CustomAuthenticationWidget" style="width: 250px"></div>
    <script>
        $(document).ready(function() {
          $("#customAuthWidgetTemplate" ).template("customAuthWidgetTemplate"); //compile & name the template
          $('#CustomAuthenticationWidget').CIAPI_widget_AuthenticationWidget({template: 'customAuthWidgetTemplate'}); //override the default template
        });
    </script>
    <script id="customAuthWidgetTemplate" type="text/x-jquery-tmpl">
        <div class="ui-dialog ui-widget ui-widget-content ui-corner-all">
            <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
            </div>
            <div id="LogOnView">
                <div class="ui-dialog-content ui-widget-content">
                    <p id="login_message"></p>
                    <fieldset>
                        <label for="username">UserName</label>
                        <input type="text"
                                name="username"
                                id="username"
                                class="inputFields"
                                data-bind="value: username"
                                tabindex="1" />
                        <label for="password">Password</label>
                        <input type="password"
                                name="password"
                                id="password"
                                class="inputFields"
                                data-bind="value: password"
                                tabindex="2" />
                    </fieldset>
                </div>
                <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                    <button id="doLogOnButton" data-bind="click: doLogOn" tabindex="3">Log on</button>
                </div>
            </div>
            <div id="LogOffView">
                <div class="ui-dialog-content ui-widget-content">
                    You are logged in as <span data-bind="text: username" />
                </div>
                <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
                    <button id="doLogOffButton" data-bind="click: doLogOff" tabindex="4">Log off</button>
                </div>
            </div>
        </div>
    </script>
</body>
</html>
